[tox]
envlist = py38, py39, py310, py311, py312
isolated_build = true

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310
    3.11: py311
    3.12: py312

[testenv]
deps = 
    pytest
    pytest-cov
    coverage[toml]
    hypothesis
commands = 
    pytest tests/ --cov=pymars --cov-report=term-missing --cov-report=html
    python -c "import coverage; cov = coverage.Coverage(); cov.load(); print(f'Coverage: {cov.report():.2f}%')"

[testenv:lint]
deps = ruff
commands = 
    ruff check pymars tests
    ruff format --check pymars tests

[testenv:type-check]
deps = 
    mypy
    numpy
    scikit-learn
commands = 
    mypy pymars/

[testenv:format]
deps = 
    ruff
commands = 
    ruff check --fix pymars tests
    ruff format pymars tests

[testenv:docs]
deps = 
    sphinx
commands = 
    sphinx-build -b html docs docs/_build